(function(f){var k=window.AmazonUIPageJS||window.P,l=k._namespace||k.attributeErrors,a=l?l("EverywhereCartAsset",""):k;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,k,l){f.when("A","load").register("EwcAjax",function(a){function b(a,b,h,e){e||(e={});return d.ajax({type:b,url:a,data:h,dataType:"html",timeout:5E3,beforeSend:function(a,c){e.beforeHandler&&e.beforeHandler(a,c)},success:function(a,c){e.successHandler&&e.successHandler(a)},error:function(a,c){e.errorHandler&&
e.errorHandler(a,c)},complete:function(a,c){e.completeHandler&&e.completeHandler()}})}var d=a.$;return{fetch:function(a,d,h){return b(a,"GET",d,h)}}});"use strict";f.when("A","load").execute("CollapseFullHeight",function(a){var b=a.$;b(document).click(function(){var a=b(".ewc-compact-head");!0===a.hasClass("ewc-compact-head--open")&&a.removeClass("ewc-compact-head--open")})});(function(a,b){a&&a.when("$","config","flyouts.anchor").run("ewc.resetArrowTemp",function(a,c,b){a(".nav-ewc-arrow").length&&
a(".nav-ewc-arrow").detach().appendTo(b())})})(k.$Nav,f);"use strict";f.when("A","ShowMultiCart","InitializeCompactBody","SetAbsolutePosition","load").register("InitializeCompactEWC",function(a,b,d,c){function p(){"0px"===g(".ewc-compact-head").css("top")?(d.initializeCompactBody(),c.setBodyAndHeadToAbsolutePosition()):k.setTimeout(p,100)}function h(){var a=g("#nav-flyout-ewc .nav-ewc-content")[0];a&&(new MutationObserver(function(a,c){p()})).observe(a,{childList:!0})}function e(){a.declarative("ewc-compact-view-cart-header",
["click"],b.onCartHeaderClick);h();p()}var g=a.$;e();return{init:e}});"use strict";f.when("A","SetCompactBodyHeight","SetBodyScrollBackground","SmartWagonSideSheet","load").register("InitializeCompactBody",function(a,b,d,c){a=a.$;a(k).bind("resize",function(){d.toggleBackgroundColorOnScrollState()});return{initializeCompactBody:function(a){b.setBodyHeight();d.toggleBackgroundColorOnScrollState();!a&&c.resetPopoverInstance&&c.resetPopoverInstance()}}});"use strict";f.when("A","load").register("SetAbsolutePosition",
function(a){var b=a.$;return{setBodyAndHeadToAbsolutePosition:function(){"absolute"!==b("#ewc-compact-body").css("position")&&(b("#ewc-compact-body").css({position:"absolute"}),b(".ewc-compact-head").css({position:"absolute"}))}}});"use strict";f.when("A","load").register("SetBodyScrollBackground",function(a){var b=a.$;return{toggleBackgroundColorOnScrollState:function(){var a=b("#ewc-compact-body .ewc-active-cart--selected");a.prop("scrollHeight")>b("#ewc-compact-body").innerHeight()?a.addClass("ewc-compact-body--scroll"):
a.removeClass("ewc-compact-body--scroll")}}});"use strict";f.when("A","jQuery","load").register("SetCompactBodyHeight",function(a,b){return{setBodyHeight:function(){var a={height:"calc(100% - "+b(".ewc-compact-head").height()+"px)"};b("#ewc-compact-body").css(a)}}});"use strict";f.when("A","InitializeCompactBody","load").register("ShowMultiCart",function(a,b){return{onCartHeaderClick:function(d){var c=a.$;if(!(1>=c(".ewc-cart-header").size())){var f=d.$event;d=d.$currentTarget.children(".ewc-cart-header");
var h=c(".ewc-compact-head");if(h.hasClass("ewc-compact-head--open")){if(!d.hasClass("ewc-cart-header--selected")){var e=d.attr("data-cart-type");c(".ewc-cart-header.ewc-cart-header--selected").removeClass("ewc-cart-header--selected");c(".ewc-active-cart.ewc-active-cart--selected").removeClass("ewc-active-cart--selected");c(".ewc-scroller.ewc-scroller--selected").removeClass("ewc-scroller--selected");d.addClass("ewc-cart-header--selected");c(".ewc-cart-header[data-cart-type\x3d'"+e+"']").addClass("ewc-cart-header--selected");
c(".ewc-active-cart[data-cart-type\x3d'"+e+"']").addClass("ewc-active-cart--selected");c(".ewc-active-cart[data-cart-type\x3d'"+e+"']").parent().addClass("ewc-scroller--selected")}h.removeClass("ewc-compact-head--open");b.initializeCompactBody(!0)}else h.addClass("ewc-compact-head--open");f.stopImmediatePropagation()}}}});"use strict";f.when("A","a-popover","EwcAjax","query-param-helper").register("SmartWagonSideSheet",function(a,b,d,c){function p(){var a=[];e(".ewc-active-cart--selected").find(".ewc-item").each(function(c,
b){a.push(e(b).data("asin"))});return a.slice(0,30).join(";")}function h(){m.hide();g.$container.animate({right:"-500px"},{duration:g.transitionDuration,complete:function(){q.hide();g.$container.addClass("aok-hidden");e("#nav-flyout-ewc").css("z-index","0")}})}var e=a.$,g={};g.$container=a.$('\x3cdiv id\x3d"ewc-smart-wagon-desktop-sideSheet" class\x3d"celwidget" cel_widget_id\x3d"ewc-smart-wagon"\x3e\x3c/div\x3e');g.$container.addClass("aok-hidden");g.$container.appendTo("#nav-flyout-ewc");g.transitionDuration=
500;var q=a.$('\x3cdiv id\x3d"ewc-smart-wagon-content"\x3e\x3c/div\x3e');q.appendTo(g.$container);var l=a.$("\x3cdiv id\x3d'ewc-smart-wagon-close-button' class\x3d'a-declarative' data-action\x3d'a-popover-floating-close'\x3e\x3c/div\x3e");l.appendTo(g.$container);l.click(h);var r=a.$("\x3cdiv id\x3d'ewc-smart-wagon-loading-spinner' class\x3d'a-row a-spacing-top-medium aok-hidden'\x3e\x3cdiv class\x3d'a-spinner-wrapper'\x3e\x3cspan class\x3d'a-spinner a-spinner-medium'\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e");
r.appendTo(g.$container);var m,n={};m=a.$("\x3cdiv id\x3d'ewc-smart-wagon-popover-lgtbox' class\x3d'a-declarative a-modal' data-action\x3d'a-popover-floating-close'\x3e\x3c/div\x3e");m.hide();m.appendTo("#navbar");m.click(h);a.declarative("ewc-popover","mouseenter",function(a){var c=a.data;n[a.data.name]||(c.dataStrategy="preload",n[a.data.name]=b.create(a.$target,c));n[a.data.name].show()});a.declarative("ewc-popover","click",function(a){k.location=a.$currentTarget.find(".sc-product-link").attr("href")});
a.declarative("view-related-items","click",function(a){b.get(a.$currentTarget.closest(".a-popover")).hide();r.removeClass("aok-hidden");var k=e(".ewc-subtotal-value \x3e .ewc-currency-symbol")[0]?e(".ewc-subtotal-value \x3e .ewc-currency-symbol")[0].value+a.data.price:null;d.fetch("/cart/ewc/smart-wagon/"+a.data.asin,{asinsInCart:p(),currency:k},{successHandler:function(b){q.html(b);q.show();f.when("A","p13n-sc-carousel").execute("activateSmartWagonCarousels",function(a,c){a=a.$;a("#smart-wagon-recommendations").find(".p13n-sc-carousel").each(c.initializeElement)});
c.overwriteProductUrls(a.data.itemid)},errorHandler:function(a){a&&h()},completeHandler:function(){r.addClass("aok-hidden")}});g.$container.css("right");g.$container.removeClass("aok-hidden");g.$container.animate({right:"100px"},g.transitionDuration,"linear");e("#nav-flyout-ewc").css("z-index","6000");m.show()});a.declarative("ewc-sw-continue-shopping","click",function(a){h()});return{resetPopoverInstance:function(){Object.keys(n).map(function(a){b.remove(n[a].$trigger)});n={}}}});"use strict";f.when("A").register("query-param-helper",
function(a){function b(a,b){if(b&&b.length&&a&&a.length){var d=a.prop("href");d&&d.length&&(b=d.substring(0,d.indexOf("?"))+b,a.attr("href",b))}}var d=a.$;return{overwriteProductUrls:function(a){var f=d("#ewc-smart-wagon-desktop-sideSheet a:has(.sc-product-title)"),h=d(".ewc-smart-wagon-item-image-container a");(a=d('div.ewc-item[data-itemid\x3d"'+a+'"]').find("a.sc-product-link"))&&1===a.length&&(a=a.prop("href"))&&a.length&&(a=a.substring(a.indexOf("?"),a.length),b(h,a),b(f,a))}}})});